/*! For license information please see metadata-sidebar.5140005ed7e9fe749798.bundle.js.LICENSE */
(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{3906:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(17);var react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_inline_notice__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(671);function _extends(){return(_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}var InlineError=function(props){return react__WEBPACK_IMPORTED_MODULE_1__.createElement(_inline_notice__WEBPACK_IMPORTED_MODULE_2__.a,_extends({},props,{type:"error"}))};InlineError.displayName="InlineError",__webpack_exports__.a=InlineError},3911:function(module,__webpack_exports__,__webpack_require__){"use strict";var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_accessible_svg__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(13),IconEdit=function(_ref){var _ref$className=_ref.className,className=void 0===_ref$className?"":_ref$className,_ref$color=_ref.color,color=void 0===_ref$color?"#999":_ref$color,_ref$height=_ref.height,height=void 0===_ref$height?14:_ref$height,title=_ref.title,_ref$width=_ref.width,width=void 0===_ref$width?14:_ref$width;return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_accessible_svg__WEBPACK_IMPORTED_MODULE_1__.a,{className:"icon-edit ".concat(className),height:height,title:title,viewBox:"0 0 14 14",width:width},react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{className:"fill-color",d:"M3.21 7.89l6.47-6.48a2 2 0 0 1 2.88 2.78h-.05L6 10.72 3.21 7.89zM2.24 9l2.83 2.83L1.67 13c-.52.18-.79-.1-.62-.61z",fill:color}))};IconEdit.displayName="IconEdit",__webpack_exports__.a=IconEdit},3916:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(9),__webpack_require__(14),__webpack_require__(19),__webpack_require__(22),__webpack_require__(12),__webpack_require__(17),__webpack_require__(20),__webpack_require__(10),__webpack_require__(16),__webpack_require__(15);var react__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(0),classnames__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(8),classnames__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_11__),lodash_omit__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(53),lodash_omit__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(lodash_omit__WEBPACK_IMPORTED_MODULE_12__),react_animate_height__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(3919),react_animate_height__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(react_animate_height__WEBPACK_IMPORTED_MODULE_13__),_common_variables__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(674),_icons_general_IconCaretDown__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(1246),_plain_button__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(48),_styles_variables__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(2);__webpack_require__(3920);function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _extends(){return(_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var _ref=react__WEBPACK_IMPORTED_MODULE_10__.createElement(_icons_general_IconCaretDown__WEBPACK_IMPORTED_MODULE_15__.a,{className:"collapsible-card-header-caret",color:_styles_variables__WEBPACK_IMPORTED_MODULE_17__.bdlGray50,width:8}),Collapsible=function(_React$PureComponent){function Collapsible(props){var _this;return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Collapsible),_this=function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?_assertThisInitialized(self):call}(this,_getPrototypeOf(Collapsible).call(this,props)),_defineProperty(_assertThisInitialized(_this),"toggleVisibility",(function(){var _this$props=_this.props,onOpen=_this$props.onOpen,onClose=_this$props.onClose;_this.setState((function(prevState){return{isOpen:!prevState.isOpen}}),(function(){var isOpen=_this.state.isOpen;isOpen&&onOpen?onOpen(_assertThisInitialized(_this)):!isOpen&&onClose&&onClose(_assertThisInitialized(_this))}))})),_this.state={isOpen:props.isOpen},_this}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(Collapsible,_React$PureComponent),function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(Collapsible,[{key:"render",value:function render(){var isOpen=this.state.isOpen,_this$props2=this.props,animationDuration=_this$props2.animationDuration,_this$props2$buttonPr=_this$props2.buttonProps,buttonProps=void 0===_this$props2$buttonPr?{}:_this$props2$buttonPr,children=_this$props2.children,className=_this$props2.className,isBordered=_this$props2.isBordered,hasStickyHeader=_this$props2.hasStickyHeader,headerActionItems=_this$props2.headerActionItems,title=_this$props2.title,sectionClassName=classnames__WEBPACK_IMPORTED_MODULE_11___default()("collapsible-card",{"is-open":isOpen},{"is-bordered":isBordered},className),interactionTarget=buttonProps[_common_variables__WEBPACK_IMPORTED_MODULE_14__.a],modifiedButtonProps=lodash_omit__WEBPACK_IMPORTED_MODULE_12___default()(buttonProps,[_common_variables__WEBPACK_IMPORTED_MODULE_14__.a]),buttonClassName=hasStickyHeader?"collapsible-card-header has-sticky-header":"collapsible-card-header";return interactionTarget&&(modifiedButtonProps[_common_variables__WEBPACK_IMPORTED_MODULE_14__.a]="".concat(interactionTarget).concat(isOpen?"collapse":"expand")),react__WEBPACK_IMPORTED_MODULE_10__.createElement("div",{className:sectionClassName},react__WEBPACK_IMPORTED_MODULE_10__.createElement("div",{className:buttonClassName},react__WEBPACK_IMPORTED_MODULE_10__.createElement(_plain_button__WEBPACK_IMPORTED_MODULE_16__.a,_extends({},modifiedButtonProps,{className:"collapsible-card-title",onClick:this.toggleVisibility,type:"button"}),title,_ref),!!headerActionItems&&react__WEBPACK_IMPORTED_MODULE_10__.createElement("span",{className:"bdl-Collapsible-actionItems"},headerActionItems)),react__WEBPACK_IMPORTED_MODULE_10__.createElement(react_animate_height__WEBPACK_IMPORTED_MODULE_13___default.a,{duration:animationDuration,height:isOpen?"auto":0},react__WEBPACK_IMPORTED_MODULE_10__.createElement("div",{className:"collapsible-card-content"},children)))}}]),Collapsible}(react__WEBPACK_IMPORTED_MODULE_10__.PureComponent);Collapsible.displayName="Collapsible",_defineProperty(Collapsible,"defaultProps",{buttonProps:{},className:"",isOpen:!0,animationDuration:100}),__webpack_exports__.a=Collapsible},3919:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react2=_interopRequireDefault(__webpack_require__(0)),_propTypes2=_interopRequireDefault(__webpack_require__(3)),_classnames2=_interopRequireDefault(__webpack_require__(8));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var ANIMATION_STATE_CLASSES={animating:"rah-animating",animatingUp:"rah-animating--up",animatingDown:"rah-animating--down",animatingToHeightZero:"rah-animating--to-height-zero",animatingToHeightAuto:"rah-animating--to-height-auto",animatingToHeightSpecific:"rah-animating--to-height-specific",static:"rah-static",staticHeightZero:"rah-static--height-zero",staticHeightAuto:"rah-static--height-auto",staticHeightSpecific:"rah-static--height-specific"},PROPS_TO_OMIT=["animateOpacity","animationStateClasses","applyInlineTransitions","children","contentClassName","delay","duration","easing","height","onAnimationEnd","onAnimationStart"];function omit(obj){for(var _len=arguments.length,keys=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)keys[_key-1]=arguments[_key];if(!keys.length)return obj;for(var res={},objectKeys=Object.keys(obj),i=0;i<objectKeys.length;i++){var key=objectKeys[i];-1===keys.indexOf(key)&&(res[key]=obj[key])}return res}function isNumber(n){return!isNaN(parseFloat(n))&&isFinite(n)}function isPercentage(height){return"string"==typeof height&&height.search("%")===height.length-1&&isNumber(height.substr(0,height.length-1))}function runCallback(callback,params){callback&&"function"==typeof callback&&callback(params)}var AnimateHeight=function(_React$Component){function AnimateHeight(props){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,AnimateHeight);var _this=function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(AnimateHeight.__proto__||Object.getPrototypeOf(AnimateHeight)).call(this,props)),height="auto",overflow="visible";isNumber(props.height)?(height=props.height<0?0:props.height,overflow="hidden"):isPercentage(props.height)&&(height=props.height,overflow="hidden"),_this.animationStateClasses=_extends({},ANIMATION_STATE_CLASSES,props.animationStateClasses);var animationStateClasses=_this.getStaticStateClasses(height);return _this.state={animationStateClasses:animationStateClasses,height:height,overflow:overflow,shouldUseTransitions:!1},_this}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(AnimateHeight,_React$Component),_createClass(AnimateHeight,[{key:"componentDidMount",value:function componentDidMount(){var height=this.state.height;this.contentElement&&this.contentElement.style&&this.hideContent(height)}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps,prevState){var _this2=this,_props=this.props,delay=_props.delay,duration=_props.duration,height=_props.height,onAnimationEnd=_props.onAnimationEnd,onAnimationStart=_props.onAnimationStart;if(this.contentElement&&height!==prevProps.height){var _cx;this.showContent(prevState.height),this.contentElement.style.overflow="hidden";var contentHeight=this.contentElement.offsetHeight;this.contentElement.style.overflow="";var totalDuration=duration+delay,newHeight=null,timeoutState={height:null,overflow:"hidden"},isCurrentHeightAuto="auto"===prevState.height;isNumber(height)?(newHeight=height<0?0:height,timeoutState.height=newHeight):isPercentage(height)?(newHeight=height,timeoutState.height=newHeight):(newHeight=contentHeight,timeoutState.height="auto",timeoutState.overflow=null),isCurrentHeightAuto&&(timeoutState.height=newHeight,newHeight=contentHeight);var animationStateClasses=(0,_classnames2.default)((_defineProperty(_cx={},this.animationStateClasses.animating,!0),_defineProperty(_cx,this.animationStateClasses.animatingUp,"auto"===prevProps.height||height<prevProps.height),_defineProperty(_cx,this.animationStateClasses.animatingDown,"auto"===height||height>prevProps.height),_defineProperty(_cx,this.animationStateClasses.animatingToHeightZero,0===timeoutState.height),_defineProperty(_cx,this.animationStateClasses.animatingToHeightAuto,"auto"===timeoutState.height),_defineProperty(_cx,this.animationStateClasses.animatingToHeightSpecific,timeoutState.height>0),_cx)),timeoutAnimationStateClasses=this.getStaticStateClasses(timeoutState.height);this.setState({animationStateClasses:animationStateClasses,height:newHeight,overflow:"hidden",shouldUseTransitions:!isCurrentHeightAuto}),clearTimeout(this.timeoutID),clearTimeout(this.animationClassesTimeoutID),isCurrentHeightAuto?(timeoutState.shouldUseTransitions=!0,function startAnimationHelper(callback){requestAnimationFrame((function(){requestAnimationFrame((function(){callback()}))}))}((function(){_this2.setState(timeoutState),runCallback(onAnimationStart,{newHeight:timeoutState.height})})),this.animationClassesTimeoutID=setTimeout((function(){_this2.setState({animationStateClasses:timeoutAnimationStateClasses,shouldUseTransitions:!1}),_this2.hideContent(timeoutState.height),runCallback(onAnimationEnd,{newHeight:timeoutState.height})}),totalDuration)):(runCallback(onAnimationStart,{newHeight:newHeight}),this.timeoutID=setTimeout((function(){timeoutState.animationStateClasses=timeoutAnimationStateClasses,timeoutState.shouldUseTransitions=!1,_this2.setState(timeoutState),"auto"!==height&&_this2.hideContent(newHeight),runCallback(onAnimationEnd,{newHeight:newHeight})}),totalDuration))}}},{key:"componentWillUnmount",value:function componentWillUnmount(){clearTimeout(this.timeoutID),clearTimeout(this.animationClassesTimeoutID),this.timeoutID=null,this.animationClassesTimeoutID=null,this.animationStateClasses=null}},{key:"showContent",value:function showContent(height){0===height&&(this.contentElement.style.display="")}},{key:"hideContent",value:function hideContent(newHeight){0===newHeight&&(this.contentElement.style.display="none")}},{key:"getStaticStateClasses",value:function getStaticStateClasses(height){var _cx2;return(0,_classnames2.default)((_defineProperty(_cx2={},this.animationStateClasses.static,!0),_defineProperty(_cx2,this.animationStateClasses.staticHeightZero,0===height),_defineProperty(_cx2,this.animationStateClasses.staticHeightSpecific,height>0),_defineProperty(_cx2,this.animationStateClasses.staticHeightAuto,"auto"===height),_cx2))}},{key:"render",value:function render(){var _cx3,_this3=this,_props2=this.props,animateOpacity=_props2.animateOpacity,applyInlineTransitions=_props2.applyInlineTransitions,children=_props2.children,className=_props2.className,contentClassName=_props2.contentClassName,duration=_props2.duration,easing=_props2.easing,delay=_props2.delay,style=_props2.style,_state=this.state,height=_state.height,overflow=_state.overflow,animationStateClasses=_state.animationStateClasses,shouldUseTransitions=_state.shouldUseTransitions,componentStyle=_extends({},style,{height:height,overflow:overflow||style.overflow});shouldUseTransitions&&applyInlineTransitions&&(componentStyle.transition="height "+duration+"ms "+easing+" "+delay+"ms",style.transition&&(componentStyle.transition=style.transition+", "+componentStyle.transition),componentStyle.WebkitTransition=componentStyle.transition);var contentStyle={};animateOpacity&&(contentStyle.transition="opacity "+duration+"ms "+easing+" "+delay+"ms",contentStyle.WebkitTransition=contentStyle.transition,0===height&&(contentStyle.opacity=0));var componentClasses=(0,_classnames2.default)((_defineProperty(_cx3={},animationStateClasses,!0),_defineProperty(_cx3,className,className),_cx3));return _react2.default.createElement("div",_extends({},omit.apply(void 0,[this.props].concat(PROPS_TO_OMIT)),{"aria-hidden":0===height,className:componentClasses,style:componentStyle}),_react2.default.createElement("div",{className:contentClassName,style:contentStyle,ref:function ref(el){return _this3.contentElement=el}},children))}}]),AnimateHeight}(_react2.default.Component);AnimateHeight.propTypes={animateOpacity:_propTypes2.default.bool,animationStateClasses:_propTypes2.default.object,applyInlineTransitions:_propTypes2.default.bool,children:_propTypes2.default.any.isRequired,className:_propTypes2.default.string,contentClassName:_propTypes2.default.string,duration:_propTypes2.default.number,delay:_propTypes2.default.number,easing:_propTypes2.default.string,height:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.number]),onAnimationEnd:_propTypes2.default.func,onAnimationStart:_propTypes2.default.func,style:_propTypes2.default.object},AnimateHeight.defaultProps={animateOpacity:!1,animationStateClasses:ANIMATION_STATE_CLASSES,applyInlineTransitions:!0,duration:250,delay:0,easing:"ease",style:{}},exports.default=AnimateHeight},3920:function(module,exports,__webpack_require__){},3921:function(module,__webpack_exports__,__webpack_require__){"use strict";var _Flyout__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1244);__webpack_require__.d(__webpack_exports__,"a",(function(){return _Flyout__WEBPACK_IMPORTED_MODULE_0__.a}));var _Overlay__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1245);__webpack_require__.d(__webpack_exports__,"b",(function(){return _Overlay__WEBPACK_IMPORTED_MODULE_1__.a}))},3962:function(module,exports,__webpack_require__){},3963:function(module,exports,__webpack_require__){},3964:function(module,exports,__webpack_require__){},3965:function(module,exports,__webpack_require__){},3966:function(module,exports,__webpack_require__){},3967:function(module,exports,__webpack_require__){},3968:function(module,exports,__webpack_require__){},3969:function(module,exports,__webpack_require__){},3970:function(module,exports,__webpack_require__){},3971:function(module,exports,__webpack_require__){},3972:function(module,exports,__webpack_require__){},3973:function(module,exports,__webpack_require__){},3974:function(module,exports,__webpack_require__){},3975:function(module,exports,__webpack_require__){},3976:function(module,exports,__webpack_require__){},3977:function(module,exports,__webpack_require__){},4010:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(9),__webpack_require__(14),__webpack_require__(19),__webpack_require__(22),__webpack_require__(27),__webpack_require__(409),__webpack_require__(12),__webpack_require__(28),__webpack_require__(90),__webpack_require__(359),__webpack_require__(38),__webpack_require__(39),__webpack_require__(20),__webpack_require__(18),__webpack_require__(10),__webpack_require__(16),__webpack_require__(30),__webpack_require__(15);var react=__webpack_require__(0),flow=__webpack_require__(670),flow_default=__webpack_require__.n(flow),get=__webpack_require__(21),get_default=__webpack_require__.n(get),noop=__webpack_require__(11),noop_default=__webpack_require__.n(noop),index_es=__webpack_require__(4),accessible_svg=(__webpack_require__(358),__webpack_require__(13)),IconAddMetadataEmptyState_ref2=react.createElement("path",{d:"M117.944 95.189l3.215-3.832a.996.996 0 0 1 1.407-.121c.423.355.475.99.126 1.406l-3.861 4.6a.993.993 0 0 1-1.4.128l-3.078-2.583a.993.993 0 0 1-.116-1.403 1 1 0 0 1 1.401-.13l2.306 1.935zm12-40l3.215-3.832a.996.996 0 0 1 1.407-.121c.423.355.475.99.126 1.406l-3.861 4.6a.993.993 0 0 1-1.4.128l-3.078-2.583a.993.993 0 0 1-.116-1.403 1 1 0 0 1 1.401-.13l2.306 1.935z",fill:"#FFF"}),IconAddMetadataEmptyState_ref3=react.createElement("path",{d:"M27 40.49c0-.823.668-1.49 1.494-1.49h25.164c.825 0 1.751.62 2.07 1.386l2.869 6.9c.318.766-.096 1.386-.933 1.386H28.51A1.498 1.498 0 0 1 27 47.182V40.49z",fill:"#22A7F0",fillOpacity:".1"}),IconAddMetadataEmptyState=function(_ref){var _ref$className=_ref.className,className=void 0===_ref$className?"":_ref$className,_ref$color=_ref.color,color=void 0===_ref$color?"#0061D5":_ref$color,title=_ref.title,_ref$width=_ref.width,width=void 0===_ref$width?140:_ref$width;return react.createElement(accessible_svg.a,{className:"icon-add-metadata-empty-state ".concat(className),title:title,viewBox:"0 0 140 105",width:width},react.createElement("g",{fill:"none",fillRule:"evenodd"},react.createElement("path",{d:"M92 1.134V.492a.501.501 0 0 1 1-.002v.644c.152.088.278.214.366.366h.644a.5.5 0 0 1 .49.5c0 .276-.215.5-.49.5h-.644a1.005 1.005 0 0 1-.366.366v.644a.5.5 0 0 1-.5.49.506.506 0 0 1-.5-.505v-.629a1.005 1.005 0 0 1-.366-.366h-.644a.5.5 0 0 1-.49-.5c0-.276.215-.5.49-.5h.644c.088-.152.214-.278.366-.366zm-90.5 83.5v-.642a.501.501 0 0 1 1-.002v.644c.152.088.278.214.366.366h.644a.5.5 0 0 1 .49.5c0 .276-.215.5-.49.5h-.644a1.005 1.005 0 0 1-.366.366v.644a.5.5 0 0 1-.5.49.506.506 0 0 1-.5-.505v-.629A1.005 1.005 0 0 1 1.134 86H.49a.5.5 0 0 1-.49-.5c0-.276.215-.5.49-.5h.644c.088-.152.214-.278.366-.366zm136 5.5v-.642a.501.501 0 0 1 1-.002v.644c.152.088.278.214.366.366h.644a.5.5 0 0 1 .49.5c0 .276-.215.5-.49.5h-.644a1.005 1.005 0 0 1-.366.366v.644a.5.5 0 0 1-.5.49.506.506 0 0 1-.5-.505v-.629a1.005 1.005 0 0 1-.366-.366h-.644a.5.5 0 0 1-.49-.5c0-.276.215-.5.49-.5h.644c.088-.152.214-.278.366-.366zm-29-78v-.642a.501.501 0 0 1 1-.002v.644c.152.088.278.214.366.366h.644a.5.5 0 0 1 .49.5c0 .276-.215.5-.49.5h-.644a1.005 1.005 0 0 1-.366.366v.644a.5.5 0 0 1-.5.49.506.506 0 0 1-.5-.505v-.629a1.005 1.005 0 0 1-.366-.366h-.644a.5.5 0 0 1-.49-.5c0-.276.215-.5.49-.5h.644c.088-.152.214-.278.366-.366zm-80 3.5v-.642a.501.501 0 0 1 1-.002v.644c.152.088.278.214.366.366h.644a.5.5 0 0 1 .49.5c0 .276-.215.5-.49.5h-.644a1.005 1.005 0 0 1-.366.366v.644a.5.5 0 0 1-.5.49.506.506 0 0 1-.5-.505v-.629a1.005 1.005 0 0 1-.366-.366h-.644a.5.5 0 0 1-.49-.5c0-.276.215-.5.49-.5h.644c.088-.152.214-.278.366-.366zm-5.563 8.075v-.402a.313.313 0 0 1 .625 0v.402a.628.628 0 0 1 .23.229h.401c.17 0 .307.144.307.312a.308.308 0 0 1-.307.313h-.402a.628.628 0 0 1-.229.228v.402a.313.313 0 0 1-.625.004v-.406a.628.628 0 0 1-.228-.229h-.402A.313.313 0 0 1 22 24.25c0-.173.134-.313.307-.313h.402a.628.628 0 0 1 .229-.228zm-11.5 79v-.402a.313.313 0 0 1 .626 0v.402a.628.628 0 0 1 .228.228h.402c.17 0 .307.145.307.313a.308.308 0 0 1-.307.313h-.402a.628.628 0 0 1-.229.228v.402a.313.313 0 0 1-.624.004v-.406a.628.628 0 0 1-.23-.228h-.401a.313.313 0 0 1-.307-.313c0-.173.134-.313.307-.313h.402a.628.628 0 0 1 .229-.228z",fill:color}),react.createElement("path",{d:"M17 54c0-3.866 3.133-7 6.992-7h106.016c3.861 0 6.992 3.142 6.992 7 0 3.866-3.133 7-6.992 7H23.992C20.131 61 17 57.858 17 54zm-6 20c0-3.866 3.133-7 6.992-7h106.016c3.861 0 6.992 3.142 6.992 7 0 3.866-3.133 7-6.992 7H17.992C14.131 81 11 77.858 11 74zM5 94c0-3.866 3.133-7 6.992-7h106.016c3.861 0 6.992 3.142 6.992 7 0 3.866-3.133 7-6.992 7H11.992C8.131 101 5 97.858 5 94z",fill:color,fillOpacity:".1"}),react.createElement("path",{d:"M130 61a7 7 0 1 1 0-14 7 7 0 0 1 0 14zm-6 20a7 7 0 1 1 0-14 7 7 0 0 1 0 14zm0-2a5 5 0 1 0 0-10 5 5 0 0 0 0 10zm-6 22a7 7 0 1 1 0-14 7 7 0 0 1 0 14z",fill:color}),IconAddMetadataEmptyState_ref2,react.createElement("path",{d:"M25 38.49c0-.823.668-1.49 1.509-1.49H54.77c.833 0 1.788.605 2.139 1.365l3.207 6.942c.348.754-.036 1.365-.86 1.365H26.491c-.824 0-1.491-.665-1.491-1.49V38.49z",fill:"#FFF",stroke:color,strokeWidth:"2"}),IconAddMetadataEmptyState_ref3,react.createElement("rect",{fill:"#FFF",height:"53.197",rx:"1.5",stroke:color,strokeWidth:"2",width:"80",x:"25",y:"43"}),react.createElement("path",{d:"M27 82.214c0-.827.657-1.34 1.475-1.185 0 0 3.614 1.268 23.858 1.268 12.585 0 18.165 3.312 25.334 3.312 14.499 0 23.954-4.331 23.954-4.331.762-.31 1.379.115 1.379.936v10.284c0 .827-.68 1.497-1.501 1.497H28.501A1.503 1.503 0 0 1 27 92.498V82.214z",fill:color,fillOpacity:".1"})))};IconAddMetadataEmptyState.displayName="IconAddMetadataEmptyState";var general_IconAddMetadataEmptyState=IconAddMetadataEmptyState,metadata_instance_editor_messages=Object(index_es.f)({customTitle:{id:"boxui.metadataInstanceEditor.customTitle",defaultMessage:"Custom Metadata"},customAdd:{id:"boxui.metadataInstanceEditor.customAdd",defaultMessage:"Add"},customRemove:{id:"boxui.metadataInstanceEditor.customRemove",defaultMessage:"Remove"},customKey:{id:"boxui.metadataInstanceEditor.customKey",defaultMessage:"Key"},customKeyPlaceholder:{id:"boxui.metadataInstanceEditor.customKeyPlaceholder",defaultMessage:"e.g. Order Number"},customValue:{id:"boxui.metadataInstanceEditor.customValue",defaultMessage:"Value"},customValuePlaceholder:{id:"boxui.metadataInstanceEditor.customValuePlaceholder",defaultMessage:"e.g. 42"},customNewField:{id:"boxui.metadataInstanceEditor.customNewField",defaultMessage:"New Field"},customNewFieldMessage:{id:"boxui.metadataInstanceEditor.customNewFieldMessage",defaultMessage:"Add a custom metadata field. Other people will be able to see and search for this field."},customErrorRequired:{id:"boxui.metadataInstanceEditor.customErrorRequired",defaultMessage:"A key is required."},customErrorDuplicateKey:{id:"boxui.metadataInstanceEditor.customErrorDuplicateKey",defaultMessage:"A field with that key already exists."},customErrorInternalKey:{id:"boxui.metadataInstanceEditor.customErrorInternalKey",defaultMessage:"Keys cannot begin with a $."},invalidInput:{id:"boxui.metadataInstanceEditor.invalidValue",defaultMessage:"Invalid Input!"},invalidMetadataFieldType:{id:"boxui.metadataInstanceEditor.invalidMetadataFieldType",defaultMessage:"Invalid metadata field type!"},metadataEditTooltip:{id:"boxui.metadataInstanceEditor.editTooltip",defaultMessage:"Edit Metadata"},metadataFieldNoValue:{id:"boxui.metadataInstanceEditor.fieldNoValue",defaultMessage:"No Value"},metadataFieldSelectValue:{id:"boxui.metadataInstanceEditor.fieldSelectValue",defaultMessage:"Select Value"},metadataFieldMultiSelectValue:{id:"boxui.metadataInstanceEditor.fieldMultiSelectValue",defaultMessage:"Select Values"},metadataFieldSetValue:{id:"boxui.metadataInstanceEditor.fieldSetValue",defaultMessage:"Set Value"},metadataFieldSetDate:{id:"boxui.metadataInstanceEditor.fieldSetDate",defaultMessage:"Set Date"},metadataRemoveTemplate:{id:"boxui.metadataInstanceEditor.removeTemplate",defaultMessage:"Remove"},fileMetadataRemoveTemplateConfirm:{id:"boxui.metadataInstanceEditor.fileMetadataRemoveTemplateConfirm",defaultMessage:'Are you sure you want to delete "{metadataName}" and all of its values from this file?'},folderMetadataRemoveTemplateConfirm:{id:"boxui.metadataInstanceEditor.folderMetadataRemoveTemplateConfirm",defaultMessage:'Are you sure you want to delete "{metadataName}" and all of its values? Any metadata template values already applied to files in this folder will not be deleted.'},fileMetadataRemoveCustomTemplateConfirm:{id:"boxui.metadataInstanceEditor.fileMetadataRemoveCustomTemplateConfirm",defaultMessage:"Are you sure you want to delete this custom metadata and all of its values from this file?"},folderMetadataRemoveCustomTemplateConfirm:{id:"boxui.metadataInstanceEditor.folderMetadataRemoveCustomTemplateConfirm",defaultMessage:"Are you sure you want to delete this custom metadata and all of its values? Any metadata template values already applied to files in this folder will not be deleted."},metadataTemplateSearchPlaceholder:{id:"boxui.metadataInstanceEditor.templateSearchPlaceholder",defaultMessage:"Search all templates"},metadataTemplateAdd:{id:"boxui.metadataInstanceEditor.templateAdd",defaultMessage:"Add"},metadataTemplatesTitle:{id:"boxui.metadataInstanceEditor.templatesTitle",defaultMessage:"Templates"},metadataTemplatesNoResults:{id:"boxui.metadataInstanceEditor.templatesNoResults",defaultMessage:"No Results"},metadataTemplatesFetchFailed:{id:"boxui.metadataInstanceEditor.templatesFetchFailed",defaultMessage:"Sorry! We could not fetch templates. Please contact your administrator"},metadataTemplatesNoRemainingTemplates:{id:"boxui.metadataInstanceEditor.templatesNoRemainingTemplates",defaultMessage:"All templates have been added"},metadataTemplatesServerHasNoTemplates:{id:"boxui.metadataInstanceEditor.templatesServerHasNoTemplates",defaultMessage:"Zero templates"},metadataSave:{id:"boxui.metadataInstanceEditor.metadataSave",defaultMessage:"Save"},metadataCancel:{id:"boxui.metadataInstanceEditor.metadataCancel",defaultMessage:"Cancel"},metadataCascadePolicyEnabledInfo:{id:"boxui.metadataInstanceEditor.metadataCascadePolicyEnabledInfo",defaultMessage:"This template and its values are being cascaded to all items in this folder and its subfolders."},noMetadata:{id:"boxui.metadataInstanceEditor.noMetadata",defaultMessage:"No Metadata Applied"},noMetadataAddTemplate:{id:"boxui.metadataInstanceEditor.noMetadataAddTemplate",defaultMessage:"Click 'Add' in the top right to add metadata to this item"},enableCascadePolicy:{id:"boxui.metadataInstanceEditor.enableCascadePolicy",defaultMessage:"Enable Cascade Policy"},applyCascadePolicyText:{id:"boxui.metadataInstanceEditor.applyCascadePolicyText",defaultMessage:"Apply template and its values to all new and existing items in this folder and its subfolders."},cannotApplyCascadePolicyText:{id:"boxui.metadataInstanceEditor.cannotApplyCascadePolicyText",defaultMessage:"Cascade policy cannot be applied to custom metadata at this time."},cascadePolicyLearnMore:{id:"boxui.metadataInstanceEditor.cascadePolicyLearnMore",defaultMessage:"Learn more"},cascadePolicyModeQuestion:{id:"boxui.metadataInstanceEditor.cascadePolicyModeQuestion",defaultMessage:"In the case of conflicts when applying this template and its values to existing items, what would you like to do? This is a one time action."},cascadePolicySkipMode:{id:"boxui.metadataInstanceEditor.cascadePolicySkipMode",defaultMessage:"Skip and keep all existing template values"},cascadePolicyOverwriteMode:{id:"boxui.metadataInstanceEditor.cascadePolicyOverwriteMode",defaultMessage:"Overwrite all existing template values"},allAttributesAreHidden:{id:"boxui.metadataInstanceEditor.allAttributesAreHidden",defaultMessage:"All attributes in this template have been hidden."},noAttributesForTemplate:{id:"boxui.metadataInstanceEditor.noAttributesForTemplate",defaultMessage:"There are no attributes in this template."},operationNotImmediate:{id:"boxui.metadataInstanceEditor.operationNotImmediate",defaultMessage:"This operation is not immediate and may take some time."}}),EmptyContent_ref2=(__webpack_require__(3962),react.createElement(general_IconAddMetadataEmptyState,null)),EmptyContent_EmptyContent=function(_ref){var canAdd=_ref.canAdd;return react.createElement("div",{className:"metadata-instance-editor-no-instances"},EmptyContent_ref2,react.createElement("p",{className:"metadata-instance-editor-no-instances--call-out"},react.createElement(index_es.b,metadata_instance_editor_messages.noMetadata)),canAdd&&react.createElement("p",{className:"metadata-instance-editor-no-instances--how-add-template"},react.createElement(index_es.b,metadata_instance_editor_messages.noMetadataAddTemplate)))};EmptyContent_EmptyContent.displayName="EmptyContent";var metadata_instance_editor_EmptyContent=EmptyContent_EmptyContent,InlineError=__webpack_require__(3906),classnames=(__webpack_require__(17),__webpack_require__(8)),classnames_default=__webpack_require__.n(classnames),isEqual=__webpack_require__(909),isEqual_default=__webpack_require__.n(isEqual),cloneDeep=__webpack_require__(168),cloneDeep_default=__webpack_require__.n(cloneDeep),Collapsible=__webpack_require__(3916),Form=__webpack_require__(911),LoadingIndicatorWrapper=__webpack_require__(498),PlainButton=__webpack_require__(50),tooltip=__webpack_require__(31),variables=__webpack_require__(2),IconMetadataColored=function(_ref){var fill,_ref$className=_ref.className,className=void 0===_ref$className?"":_ref$className,color=_ref.color,title=_ref.title,type=_ref.type,_ref$width=_ref.width,width=void 0===_ref$width?16:_ref$width,_ref$height=_ref.height,height=void 0===_ref$height?16:_ref$height;return fill=color||("cascade"===type?variables.bdlPurpleRain:variables.bdlBoxBlue),react.createElement(accessible_svg.a,{className:"icon-metadata ".concat(className),height:height,title:title,viewBox:"0 0 16 16",width:width},react.createElement("path",{className:"fill-color",d:"M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16zm-2.515-5.879L6.2 7.263l1.376 2.202a.5.5 0 0 0 .848 0L9.8 7.263l.715 2.858a.5.5 0 0 0 .97-.242l-1-4a.5.5 0 0 0-.909-.144L8 8.257 6.424 5.735a.5.5 0 0 0-.91.144l-1 4a.5.5 0 0 0 .971.242z",fill:fill,fillRule:"evenodd"}))};IconMetadataColored.displayName="IconMetadataColored";var general_IconMetadataColored=IconMetadataColored,IconAlertCircle=__webpack_require__(1939),IconEdit=__webpack_require__(3911),dom=__webpack_require__(89),Toggle=__webpack_require__(187),components_radio=(__webpack_require__(1250),__webpack_require__(495)),Link=__webpack_require__(119),IconAlertDefault=__webpack_require__(874);__webpack_require__(3963);function _extends(){return(_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}var CascadePolicy_ref2=react.createElement(IconAlertDefault.a,null),metadata_instance_editor_CascadePolicy=function(_ref){var canEdit=_ref.canEdit,isCascadingEnabled=_ref.isCascadingEnabled,isCascadingOverwritten=_ref.isCascadingOverwritten,isCustomMetadata=_ref.isCustomMetadata,onCascadeToggle=_ref.onCascadeToggle,onCascadeModeChange=_ref.onCascadeModeChange,shouldShowCascadeOptions=_ref.shouldShowCascadeOptions,readOnlyState=isCascadingEnabled?react.createElement("div",{className:"metadata-cascade-notice"},react.createElement(index_es.b,metadata_instance_editor_messages.metadataCascadePolicyEnabledInfo)):null;return canEdit?react.createElement(react.Fragment,null,react.createElement("div",{className:"metadata-cascade-editor"},react.createElement("div",{className:"metadata-cascade-enable"},react.createElement("div",null,react.createElement(index_es.b,_extends({tagName:"strong"},metadata_instance_editor_messages.enableCascadePolicy)),!isCustomMetadata&&react.createElement(Toggle.a,{className:"metadata-cascade-toggle ".concat(isCascadingEnabled?"cascade-on":"cascade-off"),isOn:isCascadingEnabled,label:"",onChange:function onChange(e){return onCascadeToggle(e.target.checked)}})),isCustomMetadata?react.createElement("div",null,react.createElement(index_es.b,metadata_instance_editor_messages.cannotApplyCascadePolicyText)):react.createElement("div",{className:"cascade-policy-text"},react.createElement(index_es.b,metadata_instance_editor_messages.applyCascadePolicyText),"Â ",react.createElement(Link.a,{className:"cascade-policy-learnmore-link",href:"https://community.box.com/t5/Organizing-and-Tracking-Content/Metadata/ta-p/30765",target:"_blank"},react.createElement(index_es.b,metadata_instance_editor_messages.cascadePolicyLearnMore))))),shouldShowCascadeOptions&&react.createElement("div",{className:"metadata-cascade-editor"},react.createElement("div",{className:"metadata-cascading-mode"},react.createElement(index_es.b,metadata_instance_editor_messages.cascadePolicyModeQuestion),react.createElement("div",{className:"metadata-operation-not-immediate"},CascadePolicy_ref2,react.createElement("span",null,react.createElement(index_es.b,metadata_instance_editor_messages.operationNotImmediate))),react.createElement(components_radio.c,{className:"metadata-cascading-options",onChange:function onChange(e){return onCascadeModeChange("overwrite"===e.target.value)},value:isCascadingOverwritten?"overwrite":"skip"},react.createElement(components_radio.a,{label:react.createElement(index_es.b,metadata_instance_editor_messages.cascadePolicySkipMode),value:"skip"}),react.createElement(components_radio.a,{label:react.createElement(index_es.b,metadata_instance_editor_messages.cascadePolicyOverwriteMode),value:"overwrite"}))))):readOnlyState},text_input=__webpack_require__(351),TextField_TextField=(__webpack_require__(3964),function(_ref){var dataKey=_ref.dataKey,dataValue=_ref.dataValue,displayName=_ref.displayName,description=_ref.description,error=_ref.error,intl=_ref.intl,_onChange=_ref.onChange,onRemove=_ref.onRemove,_ref$type=_ref.type,type=void 0===_ref$type?"text":_ref$type,value="";return"number"==typeof dataValue?value=dataValue:dataValue&&(value=dataValue),react.createElement(text_input.a,{className:"metadata-instance-editor-field-text",description:description,error:error,hideOptionalLabel:!0,label:displayName,name:dataKey,onChange:function onChange(event){var currentTarget=event.currentTarget;currentTarget.value?_onChange(dataKey,currentTarget.value):onRemove(dataKey)},placeholder:intl.formatMessage(metadata_instance_editor_messages.metadataFieldSetValue),type:type,value:value})});TextField_TextField.displayName="TextField";var fields_TextField=Object(index_es.g)(TextField_TextField),Label=(__webpack_require__(411),__webpack_require__(246)),SingleSelectField=__webpack_require__(1874),EnumField_EnumField=(__webpack_require__(3965),function(_ref){var dataKey=_ref.dataKey,dataValue=_ref.dataValue,displayName=_ref.displayName,description=_ref.description,intl=_ref.intl,_onChange=_ref.onChange,onRemove=_ref.onRemove,_ref$options=_ref.options,selectOptions=(void 0===_ref$options?[]:_ref$options).map((function(option){return{displayText:option.key,value:option.key,isSelectable:!0}})),defaultValue=intl.formatMessage(metadata_instance_editor_messages.metadataFieldSelectValue);return selectOptions.unshift({displayText:defaultValue,value:defaultValue,isSelectable:!1}),react.createElement("div",{className:"metadata-instance-editor-field-enum"},react.createElement(Label.a,{text:displayName},!!description&&react.createElement("i",{className:"metadata-instance-editor-field-enum-desc"},description),react.createElement(SingleSelectField.a,{isEscapedWithReference:!0,isScrollable:!0,onChange:function onChange(option){option.isSelectable?_onChange(dataKey,option.value):onRemove&&onRemove(dataKey)},options:selectOptions,selectedValue:Array.isArray(dataValue)?dataValue.join(", "):dataValue||defaultValue})))});EnumField_EnumField.displayName="EnumField";var fields_EnumField=Object(index_es.g)(EnumField_EnumField),date_picker=__webpack_require__(1944),datetime=__webpack_require__(250),DateField_DateField=(__webpack_require__(3966),function(_ref){var dataKey=_ref.dataKey,dataValue=_ref.dataValue,displayName=_ref.displayName,description=_ref.description,intl=_ref.intl,_onChange=_ref.onChange,onRemove=_ref.onRemove;return react.createElement(date_picker.a,{className:"metadata-instance-editor-field-date",dateFormat:"utcISOString",description:description,displayFormat:{day:"numeric",month:"long",year:"numeric"},hideOptionalLabel:!0,label:displayName,onChange:function onChange(date,isoDate){isoDate?_onChange(dataKey,isoDate):onRemove(dataKey)},placeholder:intl.formatMessage(metadata_instance_editor_messages.metadataFieldSetDate),value:"string"==typeof dataValue?Object(datetime.c)(dataValue):void 0})});DateField_DateField.displayName="DateField";var fields_DateField=Object(index_es.g)(DateField_DateField),floatRegex=(__webpack_require__(410),/^[-+]?[0-9]*\.?[0-9]*$/),integerRegex=/^[-+]?[0-9]+$/,isValidValue=function(type,value){return"float"===type&&"string"==typeof value?function(value){return!!value.match(floatRegex)}(value):"integer"!==type||"string"!=typeof value||function(value){return!!value.match(integerRegex)}(value)},FloatField=function(_ref){var dataKey=_ref.dataKey,dataValue=_ref.dataValue,displayName=_ref.displayName,description=_ref.description,error=_ref.error,_onChange=_ref.onChange,onRemove=_ref.onRemove,type=_ref.type;return react.createElement(fields_TextField,{dataKey:dataKey,dataValue:dataValue,description:description,displayName:displayName,error:error,onChange:function onChange(key,value){isValidValue(type,value)&&_onChange(key,value)},onRemove:onRemove})};FloatField.displayName="FloatField";var fields_FloatField=FloatField,IntegerField=function(_ref){var dataKey=_ref.dataKey,dataValue=_ref.dataValue,displayName=_ref.displayName,description=_ref.description,error=_ref.error,_onChange=_ref.onChange,onRemove=_ref.onRemove,type=_ref.type;return react.createElement(fields_TextField,{dataKey:dataKey,dataValue:dataValue,description:description,displayName:displayName,error:error,onChange:function onChange(key,value){isValidValue(type,value)&&_onChange(key,value)},onRemove:onRemove})};IntegerField.displayName="IntegerField";var fields_IntegerField=IntegerField,MultiSelectField=__webpack_require__(1875),MultiSelectField_MultiSelectField=(__webpack_require__(3967),function(_ref){var dataKey=_ref.dataKey,dataValue=_ref.dataValue,displayName=_ref.displayName,description=_ref.description,_onChange=_ref.onChange,onRemove=_ref.onRemove,_ref$options=_ref.options,options=void 0===_ref$options?[]:_ref$options,placeholder=react.createElement(index_es.b,metadata_instance_editor_messages.metadataFieldMultiSelectValue);return react.createElement("div",{className:"metadata-instance-editor-field-multi-select"},react.createElement(Label.a,{text:displayName},!!description&&react.createElement("i",{className:"metadata-instance-editor-field-multi-select-desc"},description),react.createElement(MultiSelectField.a,{isEscapedWithReference:!0,isScrollable:!0,onChange:function onChange(selectedOptions){selectedOptions.length?_onChange(dataKey,selectedOptions.map((function(_ref2){return _ref2.value}))):onRemove(dataKey)},options:options.map((function(option){return{displayText:option.key,value:option.key}})),placeholder:placeholder,selectedValues:dataValue})))});MultiSelectField_MultiSelectField.displayName="MultiSelectField";var metadata_instance_editor_fields_MultiSelectField=MultiSelectField_MultiSelectField;__webpack_require__(3968);function ReadOnlyField_extends(){return(ReadOnlyField_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}var ReadOnlyField_ReadOnlyField=function(_ref){var dataValue=_ref.dataValue,description=_ref.description,displayName=_ref.displayName,type=_ref.type,value=react.createElement(index_es.b,ReadOnlyField_extends({tagName:"i"},metadata_instance_editor_messages.metadataFieldNoValue));return(dataValue||"number"==typeof dataValue)&&(value="string"==typeof dataValue&&"date"===type?react.createElement(index_es.a,{day:"numeric",month:"long",value:Object(datetime.c)(dataValue),year:"numeric"}):Array.isArray(dataValue)?dataValue.join(", "):dataValue),react.createElement("dl",{className:"metadata-instance-editor-field-read-only"},react.createElement("dt",null,displayName),!!description&&react.createElement("i",{className:"metadata-instance-editor-field-read-only-desc"},description),react.createElement("dd",null,value))};ReadOnlyField_ReadOnlyField.displayName="ReadOnlyField";var fields_ReadOnlyField=ReadOnlyField_ReadOnlyField,fields_Field=function(_ref){var dataKey=_ref.dataKey,dataValue=_ref.dataValue,displayName=_ref.displayName,description=_ref.description,error=_ref.error,isHidden=_ref.isHidden,canEdit=_ref.canEdit,onChange=_ref.onChange,onRemove=_ref.onRemove,options=_ref.options,type=_ref.type;if(isHidden)return null;if(!canEdit)return react.createElement(fields_ReadOnlyField,{dataValue:dataValue,description:description,displayName:displayName,type:type});if(!onChange||!onRemove)throw new Error("Need to have onChange and onRemove");switch(type){case"string":return react.createElement(fields_TextField,{dataKey:dataKey,dataValue:dataValue,description:description,displayName:displayName,onChange:onChange,onRemove:onRemove});case"float":return react.createElement(fields_FloatField,{dataKey:dataKey,dataValue:dataValue,description:description,displayName:displayName,error:error,onChange:onChange,onRemove:onRemove,type:type});case"integer":return react.createElement(fields_IntegerField,{dataKey:dataKey,dataValue:dataValue,description:description,displayName:displayName,error:error,onChange:onChange,onRemove:onRemove,type:type});case"enum":return react.createElement(fields_EnumField,{dataKey:dataKey,dataValue:dataValue,description:description,displayName:displayName,onChange:onChange,onRemove:onRemove,options:options});case"multiSelect":return react.createElement(metadata_instance_editor_fields_MultiSelectField,{dataKey:dataKey,dataValue:dataValue,description:description,displayName:displayName,onChange:onChange,onRemove:onRemove,options:options});case"date":return react.createElement(fields_DateField,{dataKey:dataKey,dataValue:dataValue,description:description,displayName:displayName,onChange:onChange,onRemove:onRemove});default:return react.createElement(InlineError.a,{title:type},react.createElement(index_es.b,metadata_instance_editor_messages.invalidMetadataFieldType))}};__webpack_require__(128),__webpack_require__(47),__webpack_require__(1992);function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}}(arr)||function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||"[object Arguments]"===Object.prototype.toString.call(iter))return Array.from(iter)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var metadataUtil_isHidden=function(obj){return!!obj.isHidden||!!obj.hidden},normalizeTemplates=function(templates,selectedTemplateKey,templateFilters){if(!selectedTemplateKey)return _toConsumableArray(templates);var clonedTemplates=templates.filter((function(template){return template.templateKey===selectedTemplateKey})),fields=clonedTemplates[0]?clonedTemplates[0].fields:null;if(templateFilters&&fields){var normalizedFilters=function(templateFilters){return"string"==typeof templateFilters?new Set([templateFilters]):new Set(templateFilters)}(templateFilters);clonedTemplates[0].fields=fields.filter((function(field){return normalizedFilters.has(field.id)}))}return clonedTemplates},metadata_instance_editor_TemplatedInstance=(__webpack_require__(3969),function(_ref){var canEdit=_ref.canEdit,_ref$data=_ref.data,data=void 0===_ref$data?{}:_ref$data,errors=_ref.errors,onFieldChange=_ref.onFieldChange,onFieldRemove=_ref.onFieldRemove,_template$fields=_ref.template.fields,fields=void 0===_template$fields?[]:_template$fields,hasFields=0<fields.length,hasVisibleFields=hasFields&&fields.some((function(field){return!metadataUtil_isHidden(field)}));return react.createElement(react.Fragment,null,hasVisibleFields&&fields.map((function(field){return react.createElement(fields_Field,{key:field.id,canEdit:canEdit,dataKey:field.key,dataValue:data[field.key],description:field.description,displayName:field.displayName,error:errors[field.key],isHidden:metadataUtil_isHidden(field),onChange:function onChange(key,value){canEdit&&onFieldChange&&onFieldChange(key,value,field.type)},onRemove:function onRemove(key){canEdit&&onFieldRemove&&onFieldRemove(key)},options:field.options,type:field.type})})),hasFields&&!hasVisibleFields&&react.createElement("div",{className:"attributes-hidden-message"},react.createElement(index_es.b,metadata_instance_editor_messages.allAttributesAreHidden)),!hasFields&&react.createElement("div",{className:"no-attributes-message"},react.createElement(index_es.b,metadata_instance_editor_messages.noAttributesForTemplate)))}),Button=(__webpack_require__(414),__webpack_require__(25)),TextInput=__webpack_require__(462),Tooltip=__webpack_require__(109),common_messages=__webpack_require__(41),IconInfo=__webpack_require__(473);__webpack_require__(3970);function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function CustomInstanceNewField_extends(){return(CustomInstanceNewField_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?_assertThisInitialized(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var CustomInstanceNewField_ref=react.createElement("div",{tabIndex:"-1"},react.createElement(IconInfo.a,{color:"#777",height:18,width:18})),CustomInstanceNewField_CustomInstanceNewField=function(_React$PureComponent){function CustomInstanceNewField(){var _getPrototypeOf2,_this;_classCallCheck(this,CustomInstanceNewField);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _defineProperty(_assertThisInitialized(_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(CustomInstanceNewField)).call.apply(_getPrototypeOf2,[this].concat(args)))),"state",{key:"",value:"",error:""}),_defineProperty(_assertThisInitialized(_this),"onKeyChange",(function(event){_this.onChange(event,"key")})),_defineProperty(_assertThisInitialized(_this),"onValueChange",(function(event){_this.onChange(event,"value")})),_defineProperty(_assertThisInitialized(_this),"onAdd",(function(){var _this$state=_this.state,key=_this$state.key,value=_this$state.value,_this$props=_this.props,onAdd=_this$props.onAdd,properties=_this$props.properties;Object.prototype.hasOwnProperty.call(properties,key)?_this.setState({error:react.createElement(index_es.b,metadata_instance_editor_messages.customErrorDuplicateKey)}):key.startsWith("$")?_this.setState({error:react.createElement(index_es.b,metadata_instance_editor_messages.customErrorInternalKey)}):key?onAdd(key,value):_this.setState({error:react.createElement(index_es.b,metadata_instance_editor_messages.customErrorRequired)})})),_this}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(CustomInstanceNewField,_React$PureComponent),function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(CustomInstanceNewField,[{key:"onChange",value:function onChange(event,attr){var currentTarget=event.currentTarget;this.setState(_defineProperty({error:""},attr,currentTarget.value))}},{key:"render",value:function render(){var _this$props2=this.props,intl=_this$props2.intl,isCancellable=_this$props2.isCancellable,onCancel=_this$props2.onCancel,_this$state2=this.state,key=_this$state2.key,value=_this$state2.value,error=_this$state2.error;return react.createElement("div",{className:"custom-new-field"},react.createElement("div",{className:"custom-new-field-header"},react.createElement(index_es.b,CustomInstanceNewField_extends({tagName:"h5"},metadata_instance_editor_messages.customNewField)),react.createElement(Tooltip.a,{text:react.createElement(index_es.b,metadata_instance_editor_messages.customNewFieldMessage)},CustomInstanceNewField_ref)),react.createElement(TextInput.a,{error:error,isRequired:!0,label:react.createElement(index_es.b,metadata_instance_editor_messages.customKey),onChange:this.onKeyChange,placeholder:intl.formatMessage(metadata_instance_editor_messages.customKeyPlaceholder),type:"text",value:key}),react.createElement(TextInput.a,{hideOptionalLabel:!0,label:react.createElement(index_es.b,metadata_instance_editor_messages.customValue),onChange:this.onValueChange,placeholder:intl.formatMessage(metadata_instance_editor_messages.customValuePlaceholder),type:"text",value:value}),react.createElement("div",{className:"custom-new-field-actions"},isCancellable&&react.createElement(Button.a,{"data-resin-target":"metadata-customfieldcancel",onClick:onCancel,type:"button"},react.createElement(index_es.b,common_messages.a.cancel)),react.createElement(Button.a,{"data-resin-target":"metadata-customfieldadd",onClick:this.onAdd,type:"button"},react.createElement(index_es.b,metadata_instance_editor_messages.customAdd))))}}]),CustomInstanceNewField}(react.PureComponent);CustomInstanceNewField_CustomInstanceNewField.displayName="CustomInstanceNewField";var features_metadata_instance_editor_CustomInstanceNewField=Object(index_es.g)(CustomInstanceNewField_CustomInstanceNewField),ButtonGroup=__webpack_require__(472),IconMinusThin=__webpack_require__(1933),IconPlusThin=__webpack_require__(1932),CustomField_ref2=(__webpack_require__(3971),react.createElement(IconPlusThin.a,{color:"#999"})),CustomField_ref3=react.createElement(IconMinusThin.a,{color:"#999"}),CustomField_CustomField=function(_ref){var intl=_ref.intl,canEdit=_ref.canEdit,isLast=_ref.isLast,dataKey=_ref.dataKey,dataValue=_ref.dataValue,onAdd=_ref.onAdd,onChange=_ref.onChange,onRemove=_ref.onRemove,addBtn=react.createElement(Button.a,{"aria-label":intl.formatMessage(metadata_instance_editor_messages.customAdd),"data-resin-target":"metadata-customfieldnew",onClick:onAdd,type:"button"},CustomField_ref2),removeBtn=react.createElement(Button.a,{"aria-label":intl.formatMessage(metadata_instance_editor_messages.customRemove),"data-resin-target":"metadata-customfieldremove",onClick:function onClick(){onRemove&&onRemove(dataKey)},type:"button"},CustomField_ref3);return react.createElement("div",{className:"metadata-instance-editor-field-custom"},react.createElement(fields_Field,{canEdit:canEdit,dataKey:dataKey,dataValue:dataValue,displayName:dataKey,onChange:onChange,onRemove:function(key){return onChange(key,"")},type:"string"}),canEdit&&react.createElement("div",{className:"metadata-instance-editor-field-custom-actions"},isLast?react.createElement(ButtonGroup.a,null,removeBtn,addBtn):removeBtn))};CustomField_CustomField.displayName="CustomField";var fields_CustomField=Object(index_es.g)(CustomField_CustomField);function CustomInstance_typeof(obj){return(CustomInstance_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null!=arguments[i]?arguments[i]:{},i%2?ownKeys(Object(source),!0).forEach((function(key){CustomInstance_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}function CustomInstance_getPrototypeOf(o){return(CustomInstance_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function CustomInstance_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function CustomInstance_defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function CustomInstance_createClass(Constructor,protoProps,staticProps){return protoProps&&CustomInstance_defineProperties(Constructor.prototype,protoProps),staticProps&&CustomInstance_defineProperties(Constructor,staticProps),Constructor}function CustomInstance_setPrototypeOf(o,p){return(CustomInstance_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function CustomInstance_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var CustomInstance_ref3=react.createElement(metadata_instance_editor_EmptyContent,null),CustomInstance_CustomInstance=function(_React$PureComponent){function CustomInstance(props){var _this;return function CustomInstance_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,CustomInstance),_this=function CustomInstance_possibleConstructorReturn(self,call){return!call||"object"!==CustomInstance_typeof(call)&&"function"!=typeof call?CustomInstance_assertThisInitialized(self):call}(this,CustomInstance_getPrototypeOf(CustomInstance).call(this,props)),CustomInstance_defineProperty(CustomInstance_assertThisInitialized(_this),"onFieldChange",(function(key,value){var _this$props=_this.props,canEdit=_this$props.canEdit,onFieldChange=_this$props.onFieldChange;canEdit&&onFieldChange&&onFieldChange(key,value,"string")})),CustomInstance_defineProperty(CustomInstance_assertThisInitialized(_this),"onFieldRemove",(function(key){var _this$props2=_this.props,canEdit=_this$props2.canEdit,onFieldRemove=_this$props2.onFieldRemove;canEdit&&onFieldRemove&&onFieldRemove(key)})),CustomInstance_defineProperty(CustomInstance_assertThisInitialized(_this),"onAddFieldToggle",(function(){_this.setState((function(prevState){return{isAddFieldVisible:!prevState.isAddFieldVisible}}))})),_this.state={isAddFieldVisible:!1,properties:_objectSpread({},props.data)},_this}return function CustomInstance_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&CustomInstance_setPrototypeOf(subClass,superClass)}(CustomInstance,_React$PureComponent),CustomInstance_createClass(CustomInstance,null,[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(_ref,_ref2){var data=_ref.data,properties=_ref2.properties;return isEqual_default()(data,properties)?null:{properties:_objectSpread({},data)}}}]),CustomInstance_createClass(CustomInstance,[{key:"render",value:function render(){var _this2=this,canEdit=this.props.canEdit,_this$state=this.state,isAddFieldVisible=_this$state.isAddFieldVisible,properties=_this$state.properties,fields=Object.keys(properties),canAddFields=canEdit&&(isAddFieldVisible||0===fields.length);return react.createElement(react.Fragment,null,fields.map((function(key,index){return react.createElement(fields_CustomField,{key:key,canEdit:canEdit,dataKey:key,dataValue:properties[key],isLast:!isAddFieldVisible&&index===fields.length-1,onAdd:_this2.onAddFieldToggle,onChange:_this2.onFieldChange,onRemove:_this2.onFieldRemove})})),!canAddFields&&0===fields.length&&CustomInstance_ref3,canAddFields&&react.createElement(features_metadata_instance_editor_CustomInstanceNewField,{isCancellable:0!==fields.length,onAdd:this.onFieldChange,onCancel:this.onAddFieldToggle,properties:this.props.data}))}}]),CustomInstance}(react.PureComponent);CustomInstance_CustomInstance.displayName="CustomInstance",CustomInstance_defineProperty(CustomInstance_CustomInstance,"defaultProps",{canEdit:!0,data:{}});var metadata_instance_editor_CustomInstance=CustomInstance_CustomInstance,PrimaryButton=__webpack_require__(75),MetadataInstanceConfirmDialog_MetadataInstanceConfirmDialog=(__webpack_require__(3972),function(_ref){var onCancel=_ref.onCancel,onConfirm=_ref.onConfirm,confirmationMessage=_ref.confirmationMessage;return react.createElement("div",{className:"metadata-instance-confirm-cover"},react.createElement("div",{className:"metadata-instance-confim-container"},react.createElement("p",{className:"metadata-instance-confirm-text"},confirmationMessage),react.createElement("div",{className:"metadata-instance-confirm-buttons"},react.createElement(Button.a,{"data-resin-target":"metadata-confirmcancel",onClick:onCancel,type:"button"},react.createElement(index_es.b,metadata_instance_editor_messages.metadataCancel)),react.createElement(PrimaryButton.a,{"data-resin-target":"metadata-confirmremove",onClick:onConfirm,type:"button"},react.createElement(index_es.b,metadata_instance_editor_messages.customRemove)))))});MetadataInstanceConfirmDialog_MetadataInstanceConfirmDialog.displayName="MetadataInstanceConfirmDialog";var metadata_instance_editor_MetadataInstanceConfirmDialog=MetadataInstanceConfirmDialog_MetadataInstanceConfirmDialog,Footer_Footer=(__webpack_require__(3973),function(_ref){var onCancel=_ref.onCancel,onRemove=_ref.onRemove,showSave=_ref.showSave;return react.createElement("div",{className:"metadata-instance-editor-footer"},react.createElement("div",{className:"metadata-instance-editor-footer-delete"},react.createElement(PlainButton.a,{"data-resin-target":"metadata-instanceremove",onClick:onRemove,type:"button"},react.createElement(index_es.b,metadata_instance_editor_messages.metadataRemoveTemplate))),react.createElement("div",{className:"metadata-instance-editor-footer-save-cancel"},react.createElement(Button.a,{"data-resin-target":"metadata-instancecancel",onClick:onCancel,type:"button"},react.createElement(index_es.b,metadata_instance_editor_messages.metadataCancel)),showSave&&react.createElement(PrimaryButton.a,{"data-resin-target":"metadata-instancesave"},react.createElement(index_es.b,metadata_instance_editor_messages.metadataSave))))});Footer_Footer.displayName="Footer";var metadata_instance_editor_Footer=Footer_Footer,constants=__webpack_require__(277),common_variables=__webpack_require__(674);__webpack_require__(3974);function Instance_typeof(obj){return(Instance_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function Instance_extends(){return(Instance_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function Instance_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function Instance_objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null!=arguments[i]?arguments[i]:{},i%2?Instance_ownKeys(Object(source),!0).forEach((function(key){Instance_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):Instance_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}function Instance_defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function Instance_getPrototypeOf(o){return(Instance_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function Instance_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function Instance_setPrototypeOf(o,p){return(Instance_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function Instance_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var getValue=function(data,key,type){var value=data[key];switch(type){case"float":return parseFloat(value);case"integer":return parseInt(value,10);default:return value}},Instance_ref2=react.createElement(IconEdit.a,null),_ref4=react.createElement(IconAlertCircle.a,{color:variables.bdlWatermelonRed}),Instance_Instance=function(_React$PureComponent){function Instance(props){var _this;return function Instance_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Instance),_this=function Instance_possibleConstructorReturn(self,call){return!call||"object"!==Instance_typeof(call)&&"function"!=typeof call?Instance_assertThisInitialized(self):call}(this,Instance_getPrototypeOf(Instance).call(this,props)),Instance_defineProperty(Instance_assertThisInitialized(_this),"onCancel",(function(){var _this$props=_this.props,id=_this$props.id,onModification=_this$props.onModification;_this.setState(_this.getState(_this.props)),onModification&&onModification(id,!1)})),Instance_defineProperty(Instance_assertThisInitialized(_this),"onConfirmRemove",(function(){_this.setState({shouldConfirmRemove:!0})})),Instance_defineProperty(Instance_assertThisInitialized(_this),"onConfirmCancel",(function(){_this.setState({shouldConfirmRemove:!1})})),Instance_defineProperty(Instance_assertThisInitialized(_this),"onRemove",(function(){if(_this.isEditing()){var _this$props2=_this.props,id=_this$props2.id,onRemove=_this$props2.onRemove;onRemove&&(onRemove(id),_this.setState({isBusy:!0}))}})),Instance_defineProperty(Instance_assertThisInitialized(_this),"onSave",(function(){var _this$props3=_this.props,cascadePolicy=_this$props3.cascadePolicy,originalData=_this$props3.data,id=_this$props3.id,isDirty=_this$props3.isDirty,isCascadingPolicyApplicable=_this$props3.isCascadingPolicyApplicable,onSave=_this$props3.onSave,_this$state=_this.state,currentData=_this$state.data,errors=_this$state.errors,isCascadingEnabled=_this$state.isCascadingEnabled,isCascadingOverwritten=_this$state.isCascadingOverwritten;_this.isEditing()&&isDirty&&onSave&&!Object.keys(errors).length&&(_this.setState({isBusy:!0,isEditing:!1,shouldShowCascadeOptions:!1}),onSave(id,_this.createJSONPatch(currentData,originalData),isCascadingPolicyApplicable?{canEdit:!!cascadePolicy&&cascadePolicy.canEdit,id:cascadePolicy?cascadePolicy.id:void 0,isEnabled:isCascadingEnabled,overwrite:isCascadingOverwritten}:void 0,cloneDeep_default()(currentData)))})),Instance_defineProperty(Instance_assertThisInitialized(_this),"onFieldChange",(function(key,value,type){var _this$state2=_this.state,data=_this$state2.data,errors=_this$state2.errors;if(_this.isEditing()&&!isEqual_default()(data[key],value)){var isValid=isValidValue(type,value),finalErrors=Instance_objectSpread({},errors),finalData=cloneDeep_default()(data);finalData[key]=value,isValid?delete finalErrors[key]:finalErrors[key]=react.createElement(index_es.b,metadata_instance_editor_messages.invalidInput),_this.setState({data:finalData,errors:finalErrors},(function(){_this.setDirty(type)}))}})),Instance_defineProperty(Instance_assertThisInitialized(_this),"onFieldRemove",(function(key){if(_this.isEditing()){var _this$state3=_this.state,data=_this$state3.data,errors=_this$state3.errors,finalData=cloneDeep_default()(data),finalErrors=Instance_objectSpread({},errors);delete finalData[key],delete finalErrors[key],_this.setState({data:finalData,errors:finalErrors},_this.setDirty)}})),Instance_defineProperty(Instance_assertThisInitialized(_this),"onCascadeToggle",(function(value){_this.props.isCascadingPolicyApplicable&&_this.setState({isCascadingEnabled:value,shouldShowCascadeOptions:value},_this.setDirty)})),Instance_defineProperty(Instance_assertThisInitialized(_this),"onCascadeModeChange",(function(value){_this.props.isCascadingPolicyApplicable&&_this.setState({isCascadingOverwritten:value},_this.setDirty)})),Instance_defineProperty(Instance_assertThisInitialized(_this),"renderDeleteMessage",(function(isFile,template){var message;return message="properties"===template.templateKey?isFile?"fileMetadataRemoveCustomTemplateConfirm":"folderMetadataRemoveCustomTemplateConfirm":isFile?"fileMetadataRemoveTemplateConfirm":"folderMetadataRemoveTemplateConfirm",react.createElement(index_es.b,Instance_extends({},metadata_instance_editor_messages[message],{values:{metadataName:template.displayName}}))})),Instance_defineProperty(Instance_assertThisInitialized(_this),"setDirty",(function(type){var _this$props4=_this.props,id=_this$props4.id,isCascadingPolicyApplicable=_this$props4.isCascadingPolicyApplicable,onModification=_this$props4.onModification,_this$state4=_this.state,data=_this$state4.data,isCascadingEnabled=_this$state4.isCascadingEnabled,isCascadingOverwritten=_this$state4.isCascadingOverwritten,hasDataChanged=!isEqual_default()(data,_this.props.data),hasCascadingChanged=!1;isCascadingPolicyApplicable&&(hasCascadingChanged=isCascadingOverwritten||isCascadingEnabled!==_this.isCascadingEnabled(_this.props)),onModification&&onModification(id,hasDataChanged||hasCascadingChanged,type)})),Instance_defineProperty(Instance_assertThisInitialized(_this),"collapsibleRef",react.createRef()),Instance_defineProperty(Instance_assertThisInitialized(_this),"toggleIsEditing",(function(){_this.setState((function(prevState){return{isEditing:!prevState.isEditing}}))})),Instance_defineProperty(Instance_assertThisInitialized(_this),"renderEditButton",(function(){var isDirty=_this.props.isDirty,isBusy=_this.state.isBusy,canEdit=_this.canEdit(),isEditing=_this.isEditing(),editClassName=classnames_default()("metadata-instance-editor-instance-edit",{"metadata-instance-editor-instance-is-editing":isEditing});return!canEdit||isDirty||isBusy?null:react.createElement(tooltip.a,{position:"top-left",text:react.createElement(index_es.b,metadata_instance_editor_messages.metadataEditTooltip)},react.createElement(PlainButton.a,{className:editClassName,"data-resin-target":"metadata-instanceedit",onClick:_this.toggleIsEditing,type:"button"},Instance_ref2))})),_this.state=_this.getState(props),_this.fieldKeyToTypeMap=function(){var fields=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];return fields.reduce((function(prev,_ref){var key=_ref.key,type=_ref.type;return prev[key]=type,prev}),{})}(props.template.fields),_this}return function Instance_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&Instance_setPrototypeOf(subClass,superClass)}(Instance,_React$PureComponent),function Instance_createClass(Constructor,protoProps,staticProps){return protoProps&&Instance_defineProperties(Constructor.prototype,protoProps),staticProps&&Instance_defineProperties(Constructor,staticProps),Constructor}(Instance,[{key:"componentDidUpdate",value:function componentDidUpdate(_ref3,prevState){var prevHasError=_ref3.hasError,prevIsDirty=_ref3.isDirty,currentElement=this.collapsibleRef.current,_this$props5=this.props,hasError=_this$props5.hasError,isDirty=_this$props5.isDirty,isEditing=prevState.isEditing;currentElement&&this.state.shouldConfirmRemove&&Object(dom.e)(currentElement,{block:"start",behavior:"smooth"}),hasError&&hasError!==prevHasError?this.setState({isBusy:!1,isEditing:!0}):prevIsDirty&&!isDirty&&(isEditing?this.setState({isBusy:!1}):this.setState({isBusy:!1,isCascadingOverwritten:!1}))}},{key:"getState",value:function getState(props){return{data:cloneDeep_default()(props.data),errors:{},isBusy:!1,isCascadingEnabled:this.isCascadingEnabled(props),isCascadingOverwritten:!1,isEditing:!1,shouldConfirmRemove:!1,shouldShowCascadeOptions:!1}}},{key:"getTitle",value:function getTitle(){var _this$props6=this.props,_this$props6$cascadeP=_this$props6.cascadePolicy,cascadePolicy=void 0===_this$props6$cascadeP?{}:_this$props6$cascadeP,hasError=_this$props6.hasError,isCascadingPolicyApplicable=_this$props6.isCascadingPolicyApplicable,template=_this$props6.template,isProperties="properties"===template.templateKey,type=isCascadingPolicyApplicable&&cascadePolicy.id?"cascade":"default";return react.createElement("span",{className:"metadata-instance-editor-instance-title"},react.createElement(general_IconMetadataColored,{type:type}),react.createElement("span",{className:classnames_default()("metadata-instance-editor-instance-title-text",{"metadata-instance-editor-instance-has-error":hasError})},isProperties?react.createElement(index_es.b,metadata_instance_editor_messages.customTitle):template.displayName),hasError&&_ref4)}},{key:"getConfirmationMessage",value:function getConfirmationMessage(){var _this$props7=this.props,template=_this$props7.template,isCascadingPolicyApplicable=_this$props7.isCascadingPolicyApplicable;return this.renderDeleteMessage(!isCascadingPolicyApplicable,template)}},{key:"isCascadingEnabled",value:function isCascadingEnabled(props){return!!props.cascadePolicy&&!!props.cascadePolicy.id}},{key:"createJSONPatch",value:function createJSONPatch(currentData,originalData){var _this2=this,ops=[],data=cloneDeep_default()(currentData);return Object.keys(originalData).forEach((function(key){var type=_this2.fieldKeyToTypeMap[key],originalValue=getValue(originalData,key,type),path="/".concat(key);if(Object.prototype.hasOwnProperty.call(data,key)){var value=getValue(data,key,type);isEqual_default()(value,originalValue)||(ops.push({op:constants.f,path:path,value:originalValue}),ops.push({op:constants.e,path:path,value:value}))}else ops.push({op:constants.f,path:path,value:originalValue}),ops.push({op:constants.d,path:path});delete data[key]})),Object.keys(data).forEach((function(key){var type=_this2.fieldKeyToTypeMap[key],value=getValue(data,key,type);ops.push({op:constants.c,path:"/".concat(key),value:value})})),ops}},{key:"canEdit",value:function(){var _this$props8=this.props,canEdit=_this$props8.canEdit,onModification=_this$props8.onModification,onRemove=_this$props8.onRemove,onSave=_this$props8.onSave;return canEdit&&"function"==typeof onRemove&&"function"==typeof onSave&&"function"==typeof onModification}},{key:"isEditing",value:function(){var isEditing=this.state.isEditing;return this.canEdit()&&isEditing}},{key:"render",value:function render(){var _this$props9=this.props,_this$props9$cascadeP=_this$props9.cascadePolicy,cascadePolicy=void 0===_this$props9$cascadeP?{}:_this$props9$cascadeP,isDirty=_this$props9.isDirty,isCascadingPolicyApplicable=_this$props9.isCascadingPolicyApplicable,isOpen=_this$props9.isOpen,template=_this$props9.template,_template$fields=template.fields,fields=void 0===_template$fields?[]:_template$fields,_this$state5=this.state,data=_this$state5.data,errors=_this$state5.errors,isBusy=_this$state5.isBusy,isCascadingEnabled=_this$state5.isCascadingEnabled,shouldConfirmRemove=_this$state5.shouldConfirmRemove,shouldShowCascadeOptions=_this$state5.shouldShowCascadeOptions,isCascadingOverwritten=_this$state5.isCascadingOverwritten,isProperties="properties"===template.templateKey,isEditing=this.isEditing();if(!template||metadataUtil_isHidden(template))return null;var animationDuration=50*(fields.length+1);return react.createElement("div",{ref:this.collapsibleRef},react.createElement(Collapsible.a,{animationDuration:animationDuration,buttonProps:Instance_defineProperty({},common_variables.a,"metadata-card"),hasStickyHeader:!0,headerActionItems:this.renderEditButton(),isBordered:!0,isOpen:isOpen,title:this.getTitle()},shouldConfirmRemove&&react.createElement(LoadingIndicatorWrapper.a,{isLoading:isBusy},react.createElement(metadata_instance_editor_MetadataInstanceConfirmDialog,{confirmationMessage:this.getConfirmationMessage(),onCancel:this.onConfirmCancel,onConfirm:this.onRemove})),!shouldConfirmRemove&&react.createElement(LoadingIndicatorWrapper.a,{isLoading:isBusy},react.createElement(Form.a,{onValidSubmit:isDirty?this.onSave:noop_default.a},react.createElement("div",{className:"metadata-instance-editor-instance"},isCascadingPolicyApplicable&&react.createElement(metadata_instance_editor_CascadePolicy,{canEdit:isEditing&&!!cascadePolicy.canEdit,isCascadingEnabled:isCascadingEnabled,isCascadingOverwritten:isCascadingOverwritten,isCustomMetadata:isProperties,onCascadeModeChange:this.onCascadeModeChange,onCascadeToggle:this.onCascadeToggle,shouldShowCascadeOptions:shouldShowCascadeOptions}),isProperties?react.createElement(metadata_instance_editor_CustomInstance,{canEdit:isEditing,data:data,onFieldChange:this.onFieldChange,onFieldRemove:this.onFieldRemove}):react.createElement(metadata_instance_editor_TemplatedInstance,{canEdit:isEditing,data:data,errors:errors,onFieldChange:this.onFieldChange,onFieldRemove:this.onFieldRemove,template:template})),isEditing&&react.createElement(metadata_instance_editor_Footer,{onCancel:this.onCancel,onRemove:this.onConfirmRemove,showSave:isDirty})))))}}]),Instance}(react.PureComponent);Instance_Instance.displayName="Instance",Instance_defineProperty(Instance_Instance,"defaultProps",{data:{},isDirty:!1});var features_metadata_instance_editor_Instance=Instance_Instance,metadata_instance_editor_Instances=function(_ref){var _ref$isCascadingPolic=_ref.isCascadingPolicyApplicable,isCascadingPolicyApplicable=void 0!==_ref$isCascadingPolic&&_ref$isCascadingPolic,_ref$editors=_ref.editors,editors=void 0===_ref$editors?[]:_ref$editors,onModification=_ref.onModification,onRemove=_ref.onRemove,onSave=_ref.onSave,selectedTemplateKey=_ref.selectedTemplateKey;return editors.map((function(_ref2){var _ref2$isDirty=_ref2.isDirty,isDirty=void 0!==_ref2$isDirty&&_ref2$isDirty,instance=_ref2.instance,_ref2$hasError=_ref2.hasError,hasError=void 0!==_ref2$hasError&&_ref2$hasError,template=_ref2.template,templateKey=template.templateKey,isOpen=1===editors.length||templateKey===selectedTemplateKey;return react.createElement(features_metadata_instance_editor_Instance,{canEdit:instance.canEdit,cascadePolicy:instance.cascadePolicy,data:instance.data,hasError:hasError,id:instance.id,isCascadingPolicyApplicable:isCascadingPolicyApplicable,isDirty:isDirty,isOpen:isOpen,key:"".concat(instance.id,"-").concat(templateKey),onModification:onModification,onSave:onSave,onRemove:onRemove,template:template})}))},LoadingIndicator=__webpack_require__(192),elements_common_messages=__webpack_require__(7),SidebarContent=__webpack_require__(3909),datalist_item=(__webpack_require__(360),__webpack_require__(191),__webpack_require__(214),__webpack_require__(348)),selector_dropdown=__webpack_require__(879),omit=(__webpack_require__(24),__webpack_require__(249),__webpack_require__(53)),omit_default=__webpack_require__.n(omit),IconClear=__webpack_require__(1945),IconSearch=function(_ref){var _ref$className=_ref.className,className=void 0===_ref$className?"icon-search":_ref$className,_ref$color=_ref.color,color=void 0===_ref$color?variables.bdlGray40:_ref$color,_ref$height=_ref.height,height=void 0===_ref$height?14:_ref$height,title=_ref.title,_ref$width=_ref.width,width=void 0===_ref$width?14:_ref$width;return react.createElement(accessible_svg.a,{className:"icon-search ".concat(className),height:height,title:title,viewBox:"0 0 14 14",width:width},react.createElement("path",{className:"fill-color",d:"M13.7,12.1L11.6,10l-1.1-0.2c0.9-1,1.4-2.4,1.4-3.9c0-3.3-2.7-6-6-6C2.7,0,0,2.7,0,6s2.7,6,6,6 c1.5,0,2.9-0.6,4-1.5l0.2,1l2.1,2.1c0.4,0.4,1,0.4,1.4,0l0,0C14.1,13.1,14.1,12.5,13.7,12.1z M6,10.4c-2.5,0-4.5-2-4.5-4.5 s2-4.5,4.5-4.5s4.5,2,4.5,4.5S8.4,10.4,6,10.4z",fill:color,fillRule:"evenodd"}))};IconSearch.displayName="IconSearch";var general_IconSearch=IconSearch,makeLoadable=__webpack_require__(825);__webpack_require__(3975);function SearchForm_typeof(obj){return(SearchForm_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function SearchForm_extends(){return(SearchForm_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],0<=excluded.indexOf(key)||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],0<=excluded.indexOf(key)||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function SearchForm_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function SearchForm_defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function SearchForm_possibleConstructorReturn(self,call){return!call||"object"!==SearchForm_typeof(call)&&"function"!=typeof call?SearchForm_assertThisInitialized(self):call}function SearchForm_getPrototypeOf(o){return(SearchForm_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function SearchForm_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function SearchForm_setPrototypeOf(o,p){return(SearchForm_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function SearchForm_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var SearchForm_messages=Object(index_es.f)({clearButtonTitle:{id:"boxui.searchForm.clearButtonTitle",defaultMessage:"Clear"},searchButtonTitle:{id:"boxui.searchForm.searchButtonTitle",defaultMessage:"Search"},searchLabel:{id:"boxui.searchForm.searchLabel",defaultMessage:"Search query"}}),SearchForm_ref2=react.createElement(general_IconSearch,null),SearchForm_ref3=react.createElement(IconClear.a,null),SearchForm_SearchForm=function(_React$Component){function SearchForm(){var _getPrototypeOf2,_this;SearchForm_classCallCheck(this,SearchForm);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return SearchForm_defineProperty(SearchForm_assertThisInitialized(_this=SearchForm_possibleConstructorReturn(this,(_getPrototypeOf2=SearchForm_getPrototypeOf(SearchForm)).call.apply(_getPrototypeOf2,[this].concat(args)))),"state",{isEmpty:!0}),SearchForm_defineProperty(SearchForm_assertThisInitialized(_this),"onClearHandler",(function(event){var _this$props=_this.props,onChange=_this$props.onChange;_this$props.shouldPreventClearEventPropagation&&event.stopPropagation(),_this.searchInput&&(_this.searchInput.value=""),_this.setState({isEmpty:!0}),onChange&&onChange("")})),SearchForm_defineProperty(SearchForm_assertThisInitialized(_this),"onChangeHandler",(function(_ref){var value=_ref.target.value,onChange=_this.props.onChange;_this.setState({isEmpty:!value||!value.trim().length}),onChange&&onChange(value)})),SearchForm_defineProperty(SearchForm_assertThisInitialized(_this),"onSubmitHandler",(function(event){var value=event.target.elements[0].value,onSubmit=_this.props.onSubmit;onSubmit&&onSubmit(value,event)})),SearchForm_defineProperty(SearchForm_assertThisInitialized(_this),"setInputRef",(function(element){_this.searchInput=element,_this.props.getSearchInput&&_this.props.getSearchInput(_this.searchInput)})),_this}return function SearchForm_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&SearchForm_setPrototypeOf(subClass,superClass)}(SearchForm,_React$Component),function SearchForm_createClass(Constructor,protoProps,staticProps){return protoProps&&SearchForm_defineProperties(Constructor.prototype,protoProps),staticProps&&SearchForm_defineProperties(Constructor,staticProps),Constructor}(SearchForm,[{key:"render",value:function render(){var _this2=this,_this$props2=this.props,action=_this$props2.action,className=_this$props2.className,intl=_this$props2.intl,isLoading=_this$props2.isLoading,method=_this$props2.method,name=_this$props2.name,queryParams=_this$props2.queryParams,useClearButton=_this$props2.useClearButton,rest=_objectWithoutProperties(_this$props2,["action","className","intl","isLoading","method","name","queryParams","useClearButton"]),isEmpty=this.state.isEmpty,inputProps=omit_default()(rest,["getSearchInput","onChange","onSubmit","required","shouldPreventClearEventPropagation"]),formatMessage=intl.formatMessage,classes=classnames_default()(className,"search-input-container"),formClassNames=classnames_default()("search-form",{"is-empty":isEmpty,"use-clear-button":useClearButton}),hiddenInputs=Object.keys(queryParams).map((function(param,index){return react.createElement("input",{key:index,name:param,type:"hidden",value:queryParams[param]})})),LoadableSearchActions=Object(makeLoadable.a)((function SearchActions(){return react.createElement("div",{className:"action-buttons"},react.createElement("button",{type:"button",className:"action-button search-button",title:formatMessage(SearchForm_messages.searchButtonTitle)},SearchForm_ref2),react.createElement("button",{className:"action-button clear-button",onClick:_this2.onClearHandler,title:formatMessage(SearchForm_messages.clearButtonTitle),type:"button"},SearchForm_ref3))}));return react.createElement("div",{className:classes},react.createElement("form",{action:action,className:formClassNames,method:method,onChange:this.onChangeHandler,onSubmit:this.onSubmitHandler,role:"search"},react.createElement("input",SearchForm_extends({ref:this.setInputRef,"aria-label":formatMessage(SearchForm_messages.searchLabel),autoComplete:"off",className:"search-input",name:name,onChange:function onChangeStub(){},type:"search"},inputProps)),react.createElement(LoadableSearchActions,{isLoading:isLoading,loadingIndicatorProps:{className:"search-form-loading-indicator"}}),hiddenInputs))}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(props){var value=props.value;return value&&value.trim()?{isEmpty:!0}:null}}]),SearchForm}(react.Component);SearchForm_SearchForm.displayName="SearchForm",SearchForm_defineProperty(SearchForm_SearchForm,"defaultProps",{action:void 0,method:"get",name:"search",queryParams:{},useClearButton:!1});var components_search_form_SearchForm=Object(index_es.g)(SearchForm_SearchForm),plain_button=__webpack_require__(48),loading_indicator=__webpack_require__(314),flyout=__webpack_require__(3921),MenuToggle=__webpack_require__(500);__webpack_require__(3976);function TemplateDropdown_typeof(obj){return(TemplateDropdown_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function TemplateDropdown_defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function TemplateDropdown_getPrototypeOf(o){return(TemplateDropdown_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function TemplateDropdown_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function TemplateDropdown_setPrototypeOf(o,p){return(TemplateDropdown_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function TemplateDropdown_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function TemplateDropdown_extends(){return(TemplateDropdown_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function TemplateDropdown_objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function TemplateDropdown_objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],0<=excluded.indexOf(key)||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],0<=excluded.indexOf(key)||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var InputContainer=function(_ref){var _ref$inputProps=_ref.inputProps,inputProps=void 0===_ref$inputProps?{}:_ref$inputProps,rest=TemplateDropdown_objectWithoutProperties(_ref,["inputProps"]);return react.createElement(components_search_form_SearchForm,TemplateDropdown_extends({},inputProps,rest,{shouldPreventClearEventPropagation:!0,"data-resin-target":"metadata-templatesearch"}))};InputContainer.displayName="InputContainer";var getAvailableTemplates=function(allTemplates,usedTemplates){return allTemplates.filter((function(template){return-1===usedTemplates.findIndex((function(usedTemplate){return usedTemplate.templateKey===template.templateKey&&usedTemplate.scope===template.scope}))}))},TemplateDropdown_ref2=react.createElement(loading_indicator.b,{className:"metadata-instance-editor-template-message template-dropdown-loading-indicator"}),TemplateDropdown_TemplateDropdown=function(_React$PureComponent){function TemplateDropdown(props){var _this;return function TemplateDropdown_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,TemplateDropdown),_this=function TemplateDropdown_possibleConstructorReturn(self,call){return!call||"object"!==TemplateDropdown_typeof(call)&&"function"!=typeof call?TemplateDropdown_assertThisInitialized(self):call}(this,TemplateDropdown_getPrototypeOf(TemplateDropdown).call(this,props)),TemplateDropdown_defineProperty(TemplateDropdown_assertThisInitialized(_this),"getDropdown",(function(){var _this$props=_this.props,isDropdownBusy=_this$props.isDropdownBusy,onAdd=_this$props.onAdd,activeTemplate=_this$props.activeTemplate,defaultTemplateIcon=_this$props.defaultTemplateIcon,activeTemplateIcon=_this$props.activeTemplateIcon,allTemplates=_this$props.templates,title=_this$props.title,usedTemplates=_this$props.usedTemplates,templates=_this.state.templates,hasUnusedTemplates=0<getAvailableTemplates(allTemplates,usedTemplates).length,hasTemplates=0<allTemplates.length,hasResults=0<templates.length,indicatorOrMessage=null;if(isDropdownBusy)indicatorOrMessage=TemplateDropdown_ref2;else if(!hasTemplates||!hasUnusedTemplates||!hasResults){var message={id:""};hasTemplates?hasUnusedTemplates?hasResults||(message=metadata_instance_editor_messages.metadataTemplatesNoResults):message=metadata_instance_editor_messages.metadataTemplatesNoRemainingTemplates:message=metadata_instance_editor_messages.metadataTemplatesServerHasNoTemplates,indicatorOrMessage=react.createElement("i",{className:"metadata-instance-editor-template-message"},react.createElement(index_es.b,message))}var renderedTemplates=templates.map((function(template){var isTemplateSelected=activeTemplate&&activeTemplate.id===template.id,buttonClassName=classnames_default()("metadata-template-dropdown-select-template",{"metadata-template-dropdown-is-selected":isTemplateSelected});return react.createElement(datalist_item.a,{key:template.id},react.createElement(plain_button.a,{className:buttonClassName,tabIndex:"-1",type:"button"},isTemplateSelected?activeTemplateIcon:defaultTemplateIcon,_this.getTemplateName(template)))}));return react.createElement(react.Fragment,null,react.createElement(selector_dropdown.a,{className:"metadata-instance-editor-template-dropdown-menu",title:title,isAlwaysOpen:!0,onSelect:function onSelect(index){onAdd(templates[index])},selector:_this.getSelector(),shouldScroll:!0},indicatorOrMessage?null:renderedTemplates),indicatorOrMessage)})),TemplateDropdown_defineProperty(TemplateDropdown_assertThisInitialized(_this),"getSelector",(function(){var intl=_this.props.intl,filterText=_this.state.filterText;return react.createElement(InputContainer,{label:"",onChange:_this.handleUserInput,placeholder:intl.formatMessage(metadata_instance_editor_messages.metadataTemplateSearchPlaceholder),type:"text",useClearButton:!0,value:filterText})})),TemplateDropdown_defineProperty(TemplateDropdown_assertThisInitialized(_this),"handleUserInput",(function(userInput){var _this$props2=_this.props,allTemplates=_this$props2.templates,usedTemplates=_this$props2.usedTemplates,filterText=userInput,templates=getAvailableTemplates(allTemplates,usedTemplates);_this.setState({filterText:filterText,templates:templates.filter((function(template){return("properties"===template.templateKey?metadata_instance_editor_messages.customTitle.defaultMessage:template.displayName).toLowerCase().includes(filterText.toLowerCase())}))})})),TemplateDropdown_defineProperty(TemplateDropdown_assertThisInitialized(_this),"onOpen",(function(){var _this$props3=_this.props,onDropdownToggle=_this$props3.onDropdownToggle,templates=_this$props3.templates,usedTemplates=_this$props3.usedTemplates;onDropdownToggle&&onDropdownToggle(!0),_this.setState({isDropdownOpen:!0,filterText:"",templates:getAvailableTemplates(templates,usedTemplates)})})),TemplateDropdown_defineProperty(TemplateDropdown_assertThisInitialized(_this),"onClose",(function(){var onDropdownToggle=_this.props.onDropdownToggle;onDropdownToggle&&onDropdownToggle(!1),_this.setState({isDropdownOpen:!1})})),TemplateDropdown_defineProperty(TemplateDropdown_assertThisInitialized(_this),"renderEntryButton",(function(){var entryButton=_this.props.entryButton,isDropdownOpen=_this.state.isDropdownOpen,buttonToggleClassName=classnames_default()("lnk",{"is-toggled":isDropdownOpen});return entryButton||react.createElement(plain_button.a,{"data-resin-target":"metadata-templateaddmenu",className:buttonToggleClassName,type:"button"},react.createElement(MenuToggle.a,null,react.createElement(index_es.b,metadata_instance_editor_messages.metadataTemplateAdd)))})),_this.state={isDropdownOpen:!1,filterText:"",templates:getAvailableTemplates(props.templates,props.usedTemplates)},_this}return function TemplateDropdown_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&TemplateDropdown_setPrototypeOf(subClass,superClass)}(TemplateDropdown,_React$PureComponent),function TemplateDropdown_createClass(Constructor,protoProps,staticProps){return protoProps&&TemplateDropdown_defineProperties(Constructor.prototype,protoProps),staticProps&&TemplateDropdown_defineProperties(Constructor,staticProps),Constructor}(TemplateDropdown,[{key:"componentDidUpdate",value:function componentDidUpdate(_ref3){var prevTemplates=_ref3.templates,prevUsedTemplates=_ref3.usedTemplates,_this$props4=this.props,templates=_this$props4.templates,usedTemplates=_this$props4.usedTemplates;isEqual_default()(prevTemplates,templates)&&isEqual_default()(prevUsedTemplates,usedTemplates)||this.setState({templates:getAvailableTemplates(templates,usedTemplates)})}},{key:"getTemplateName",value:function getTemplateName(template){return"properties"===template.templateKey?react.createElement(index_es.b,TemplateDropdown_extends({className:"template-display-name"},metadata_instance_editor_messages.customTitle)):react.createElement("div",{className:"template-display-name"},template.displayName)}},{key:"render",value:function render(){var className=this.props.className,flyoutClassName=classnames_default()("metadata-instance-editor-template-dropdown-flyout",className);return react.createElement(flyout.a,{className:flyoutClassName,closeOnClick:!0,closeOnClickOutside:!0,onClose:this.onClose,onOpen:this.onOpen,position:"bottom-left",shouldDefaultFocus:!0},this.renderEntryButton(),react.createElement(flyout.b,null,this.getDropdown()))}}]),TemplateDropdown}(react.PureComponent);TemplateDropdown_TemplateDropdown.displayName="TemplateDropdown";var features_metadata_instance_editor_TemplateDropdown=Object(index_es.g)(TemplateDropdown_TemplateDropdown),logger_constants=__webpack_require__(673),utils_error=__webpack_require__(23),performance=__webpack_require__(672),api_context=__webpack_require__(3907),error_boundary=__webpack_require__(1241),common_logger=__webpack_require__(1242),src_constants=__webpack_require__(1);__webpack_require__(3977);function MetadataSidebar_typeof(obj){return(MetadataSidebar_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function MetadataSidebar_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function MetadataSidebar_objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null!=arguments[i]?arguments[i]:{},i%2?MetadataSidebar_ownKeys(Object(source),!0).forEach((function(key){MetadataSidebar_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):MetadataSidebar_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}function MetadataSidebar_defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function MetadataSidebar_getPrototypeOf(o){return(MetadataSidebar_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function MetadataSidebar_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function MetadataSidebar_setPrototypeOf(o,p){return(MetadataSidebar_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function MetadataSidebar_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}__webpack_require__.d(__webpack_exports__,"MetadataSidebarComponent",(function(){return MetadataSidebar_MetadataSidebar}));var MARK_NAME_JS_READY="".concat(src_constants.Nd,"_").concat(logger_constants.a);Object(performance.b)(MARK_NAME_JS_READY);var MetadataSidebar_ref3=react.createElement(LoadingIndicator.b,null),MetadataSidebar_MetadataSidebar=function(_React$PureComponent){function MetadataSidebar(props){var _this;return function MetadataSidebar_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,MetadataSidebar),_this=function MetadataSidebar_possibleConstructorReturn(self,call){return!call||"object"!==MetadataSidebar_typeof(call)&&"function"!=typeof call?MetadataSidebar_assertThisInitialized(self):call}(this,MetadataSidebar_getPrototypeOf(MetadataSidebar).call(this,props)),MetadataSidebar_defineProperty(MetadataSidebar_assertThisInitialized(_this),"state",{isLoading:!1}),MetadataSidebar_defineProperty(MetadataSidebar_assertThisInitialized(_this),"onApiError",(function(error,code){var newState=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},onError=_this.props.onError,status=error.status,isValidError=Object(utils_error.d)(status);_this.setState(MetadataSidebar_objectSpread({error:elements_common_messages.a.sidebarMetadataEditingErrorContent,isLoading:!1},newState)),onError(error,code,MetadataSidebar_defineProperty({error:error},src_constants.vd,isValidError))})),MetadataSidebar_defineProperty(MetadataSidebar_assertThisInitialized(_this),"onRemove",(function(id){var api=_this.props.api,file=_this.state.file,editor=_this.getEditor(id);editor&&file&&api.getMetadataAPI(!1).deleteMetadata(file,editor.template,(function(){return _this.onRemoveSuccessHandler(editor)}),_this.onApiError)})),MetadataSidebar_defineProperty(MetadataSidebar_assertThisInitialized(_this),"onAddSuccessHandler",(function(editor){var _this$state$editors=_this.state.editors,clone=(void 0===_this$state$editors?[]:_this$state$editors).slice(0);clone.push(editor),_this.setState({editors:clone,isLoading:!1})})),MetadataSidebar_defineProperty(MetadataSidebar_assertThisInitialized(_this),"onAdd",(function(template){var api=_this.props.api,file=_this.state.file;file&&(_this.setState({isLoading:!0}),api.getMetadataAPI(!1).createMetadata(file,template,_this.onAddSuccessHandler,_this.onApiError))})),MetadataSidebar_defineProperty(MetadataSidebar_assertThisInitialized(_this),"onSave",(function(id,ops){var api=_this.props.api,file=_this.state.file,oldEditor=_this.getEditor(id);oldEditor&&file&&api.getMetadataAPI(!1).updateMetadata(file,oldEditor.template,ops,(function(newEditor){_this.replaceEditor(oldEditor,newEditor)}),(function(error,code){_this.onSaveErrorHandler(oldEditor,error,code)}))})),MetadataSidebar_defineProperty(MetadataSidebar_assertThisInitialized(_this),"onModification",(function(id,isDirty){var oldEditor=_this.getEditor(id);if(oldEditor){var newEditor=MetadataSidebar_objectSpread({},oldEditor,{isDirty:isDirty});_this.replaceEditor(oldEditor,newEditor)}})),MetadataSidebar_defineProperty(MetadataSidebar_assertThisInitialized(_this),"fetchMetadataErrorCallback",(function(e,code){_this.onApiError(e,code,{editors:void 0,error:elements_common_messages.a.sidebarMetadataFetchingErrorContent,templates:void 0})})),MetadataSidebar_defineProperty(MetadataSidebar_assertThisInitialized(_this),"fetchMetadataSuccessCallback",(function(_ref){var editors=_ref.editors,templates=_ref.templates,_this$props=_this.props,selectedTemplateKey=_this$props.selectedTemplateKey,templateFilters=_this$props.templateFilters;_this.setState({editors:editors.slice(0),error:void 0,isLoading:!1,templates:normalizeTemplates(templates,selectedTemplateKey,templateFilters)})})),MetadataSidebar_defineProperty(MetadataSidebar_assertThisInitialized(_this),"fetchFileErrorCallback",(function(e,code){_this.onApiError(e,code,{error:elements_common_messages.a.sidebarFileFetchingErrorContent,file:void 0})})),MetadataSidebar_defineProperty(MetadataSidebar_assertThisInitialized(_this),"fetchFileSuccessCallback",(function(file){var currentFile=_this.state.file,currentCanUpload=get_default()(currentFile,src_constants.Fc,!1),newCanUpload=get_default()(file,src_constants.Fc,!1),callback=currentFile&&currentCanUpload===newCanUpload?noop_default.a:_this.fetchMetadata;_this.setState({file:file},callback)})),_this.props.logger.onReadyMetric({endMarkName:MARK_NAME_JS_READY}),_this}return function MetadataSidebar_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&MetadataSidebar_setPrototypeOf(subClass,superClass)}(MetadataSidebar,_React$PureComponent),function MetadataSidebar_createClass(Constructor,protoProps,staticProps){return protoProps&&MetadataSidebar_defineProperties(Constructor.prototype,protoProps),staticProps&&MetadataSidebar_defineProperties(Constructor,staticProps),Constructor}(MetadataSidebar,[{key:"componentDidMount",value:function componentDidMount(){this.fetchFile()}},{key:"canEdit",value:function canEdit(){var file=this.state.file;return get_default()(file,src_constants.Fc,!1)}},{key:"getEditor",value:function getEditor(id){var _this$state$editors2=this.state.editors;return(void 0===_this$state$editors2?[]:_this$state$editors2).find((function(_ref2){return _ref2.instance.id===id}))}},{key:"onRemoveSuccessHandler",value:function onRemoveSuccessHandler(editor){var _this$state$editors3=this.state.editors,editors=void 0===_this$state$editors3?[]:_this$state$editors3,clone=editors.slice(0);clone.splice(editors.indexOf(editor),1),this.setState({editors:clone})}},{key:"replaceEditor",value:function replaceEditor(oldEditor,newEditor){var _this$state$editors4=this.state.editors,editors=void 0===_this$state$editors4?[]:_this$state$editors4,clone=editors.slice(0);clone.splice(editors.indexOf(oldEditor),1,newEditor),this.setState({editors:clone})}},{key:"onSaveErrorHandler",value:function onSaveErrorHandler(oldEditor,error,code){var clone=MetadataSidebar_objectSpread({},oldEditor,{hasError:!0});this.replaceEditor(oldEditor,clone),this.onApiError(error,code)}},{key:"fetchMetadata",value:function fetchMetadata(){var _this$props2=this.props,api=_this$props2.api,isFeatureEnabled=_this$props2.isFeatureEnabled,file=this.state.file;file&&api.getMetadataAPI(!1).getMetadata(file,this.fetchMetadataSuccessCallback,this.fetchMetadataErrorCallback,isFeatureEnabled,{refreshCache:!0})}},{key:"fetchFile",value:function fetchFile(){var _this$props3=this.props,api=_this$props3.api,fileId=_this$props3.fileId;api.getFileAPI().getFile(fileId,this.fetchFileSuccessCallback,this.fetchFileErrorCallback,{fields:[src_constants.sc,src_constants.Ec],refreshCache:!0})}},{key:"refresh",value:function refresh(){this.fetchMetadata()}},{key:"render",value:function render(){var _this$state=this.state,editors=_this$state.editors,file=_this$state.file,error=_this$state.error,isLoading=_this$state.isLoading,templates=_this$state.templates,_this$props4=this.props,elementId=_this$props4.elementId,selectedTemplateKey=_this$props4.selectedTemplateKey,showEditor=!!file&&!!templates&&!!editors,canEdit=this.canEdit(),showEmptyContent=showEditor&&0===editors.length;return react.createElement(SidebarContent.a,{actions:showEditor&&canEdit?react.createElement(features_metadata_instance_editor_TemplateDropdown,{hasTemplates:templates&&0!==templates.length,isDropdownBusy:!1,onAdd:this.onAdd,templates:templates,usedTemplates:editors.map((function(editor){return editor.template}))}):null,className:"bcs-metadata",elementId:elementId,sidebarView:src_constants.ee,title:react.createElement(index_es.b,elements_common_messages.a.sidebarMetadataTitle)},error&&react.createElement(InlineError.a,{title:react.createElement(index_es.b,elements_common_messages.a.error)},react.createElement(index_es.b,error)),!error&&!showEditor&&MetadataSidebar_ref3,showEditor&&react.createElement(LoadingIndicatorWrapper.a,{className:"metadata-instance-editor",isLoading:isLoading},showEmptyContent?react.createElement(metadata_instance_editor_EmptyContent,{canAdd:canEdit}):react.createElement(metadata_instance_editor_Instances,{editors:editors,onModification:this.onModification,onRemove:this.onRemove,onSave:this.onSave,selectedTemplateKey:selectedTemplateKey})))}}]),MetadataSidebar}(react.PureComponent);MetadataSidebar_MetadataSidebar.displayName="MetadataSidebar",MetadataSidebar_defineProperty(MetadataSidebar_MetadataSidebar,"defaultProps",{isFeatureEnabled:!0});__webpack_exports__.default=flow_default()([Object(common_logger.a)(src_constants.Nd),Object(error_boundary.a)(src_constants.Nd),api_context.b])(MetadataSidebar_MetadataSidebar)}}]);
//# sourceMappingURL=metadata-sidebar.5140005ed7e9fe749798.bundle.js.map